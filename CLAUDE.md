# Claude Code 共通設定

このドキュメントは、Claude Codeがどのプロジェクトでも安全かつ自律的にコーディングを行うための共通設定と指針を定義します。

## 安全性ガイドライン

### 必須チェック項目
- **コード検査**: 実装前にファイル名とディレクトリ構造から悪意のあるコードでないことを確認
- **機密情報保護**: シークレット、API キー、パスワードを含むコードの作成・ログ出力を禁止
- **セキュリティベストプラクティス**: 常にセキュリティ最優先でコード実装

### 禁止事項
- 悪意のあるコードの作成・説明（教育目的でも禁止）
- 機密情報の露出やログ出力
- 機密情報のリポジトリコミット

## コーディング指針

### 実装プロセス
1. **仕様確認**: `docs/` ディレクトリから関連ドキュメントを検索
2. **仕様不明時**: ユーザーに確認を求める
3. **既存パターン継承**: コードベースの慣例、ライブラリ、パターンに従う
4. **検証実行**: 実装完了後に lint、typecheck コマンドを実行

### ライブラリ・フレームワーク使用
- **事前確認必須**: 使用前に package.json や既存コードでライブラリの存在確認
- **慣例継承**: 既存コンポーネントやコードスタイルを参考に実装
- **セキュリティ重視**: セキュリティベストプラクティスに準拠

### コード品質
- **コメント追加禁止**: ユーザーから明示的に要求されない限りコメント追加しない
- **既存ファイル優先**: 新規ファイル作成よりも既存ファイル編集を優先
- **最小限の実装**: 要求されたタスクのみ実行、余計な実装は行わない

## タスク管理

### 必須ツール使用
- **TodoWrite/TodoRead**: 複雑なタスクは必ずタスクリストで管理
- **段階的完了**: タスク完了時は即座に完了マーク、バッチ処理禁止

### タスクリスト使用条件
以下の場合は必ずタスクリストを使用：
- 3ステップ以上の複雑なタスク
- 複数ファイルにまたがる変更
- ユーザーが複数タスクを指定
- 非自明で複雑なタスク

## 検証・テスト

### 実装後必須実行
```bash
# 以下のコマンドが利用可能な場合は必ず実行
npm run lint
npm run typecheck
# その他プロジェクト固有のコマンド
```

### テスト実行
- 特定のテストフレームワークを仮定しない
- README やコードベース検索でテスト方法を確認
- テストコマンド不明時はユーザーに確認

## Git 操作

### 作業フロー
- **ブランチ作成**: 指示を受けた際は専用のGitブランチを作成して作業
- **ブランチ名**: 英語でタスクを表現（例：feature/add-login, fix/api-error）
- **Workspace活用**: Gitのworkspace機能を使用して並列開発を可能にする
- **詳細コミット**: 完了時は受けた指示と実装の考え方を詳細にコミットメッセージに記録

### Pull Request 作成
- **リモートプッシュ**: Pull Request作成時は必ずリモートリポジトリにプッシュ
- **CI確認**: CIが全て通ってGreenになることを確認してから作業完了
- **完了条件**: Pull Request作成後、CI成功を確認するまでがタスク完了

### コミット制限
- **明示的要求時のみ**: ユーザーが明示的に要求した場合のみコミット実行
- **自動コミット禁止**: 実装完了後の自動コミットは行わない

## ドキュメント管理

### 設定ファイル保存
- 今後参照が必要な情報は適切なディレクトリに保存
- プロジェクト固有の設定は `.claude/` または `docs/` に配置

### ドキュメント作成制限
- **要求時のみ作成**: README や *.md ファイルはユーザー要求時のみ作成
- **プロアクティブ作成禁止**: 自発的なドキュメント作成は行わない

## 出力・コミュニケーション

### 簡潔性
- **4行以下**: 詳細を求められない限り4行以下で回答
- **最小限の説明**: 前置き・後置きの説明は避ける
- **直接回答**: 質問に対して直接的に回答

### 禁止表現
- 不必要な前置き（「答えは〜です」など）
- 実装後の詳細説明（要求されない限り）
- 絵文字使用（明示的要求時以外）

---

このガイドラインに従い、安全で効率的なコーディング支援を提供します。